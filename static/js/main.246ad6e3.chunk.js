(this["webpackJsonppool-explorer"]=this["webpackJsonppool-explorer"]||[]).push([[0],{156:function(e,t,n){},162:function(e,t){},172:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(37),i=n.n(r),o=(n(155),n(156),n(86)),p=n(198),d=n(75),y=n(107),l=n(195),u=[{name:"Production",contractAddress:"0xDF686c48A8Cc5dF43c2b5b3086c4d77E9463Cac0"},{name:"Development",contractAddress:"0x40EC0E5FB2d22C1Bbf00662635eF8D20E22E8560"}],c="https://ipfs.infura.io/ipfs",b="https://goerli.infura.io/v3/a4ba4d26c1a145999d11d2630ac5eb3c",m="https://goerli.etherscan.io",f=n(85),g=function(){return Object(f.b)()},j=f.c,T=n(87),x=n(3),v=n.n(x),h=n(48),O=n(58),A=n(4),I=n(6),_=n(122),w=[{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"},{indexed:!1,internalType:"bool",name:"latest",type:"bool"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdminAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdminRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"}],name:"AgentRegistryChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"},{indexed:!1,internalType:"bool",name:"latest",type:"bool"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"PoolAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"PoolAdminAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"PoolAdminRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"}],name:"PoolOwnershipTransfered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"uint256",name:"version",type:"uint256"},{internalType:"bool",name:"latest",type:"bool"}],name:"addAgent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"address",name:"_admin",type:"address"}],name:"addAgentAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"addPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"admin",type:"address"}],name:"addPoolAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"agentAdminAt",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentAdminLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"agentAt",outputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"string",name:"",type:"string"},{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"agentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentRef",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes32",name:"",type:"bytes32"}],name:"agentUsingLatest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes32",name:"",type:"bytes32"}],name:"agentVersion",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"getPoolHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract MinimalForwarderUpgradeable",name:"forwarder",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"poolAdminAt",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"poolAdminLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolExistsMap",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolOwners",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"removeAgent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"address",name:"_admin",type:"address"}],name:"removeAgentAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"admin",type:"address"}],name:"removePoolAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"setAgentRegistry",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"_to",type:"address"}],name:"transferPoolOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"uint256",name:"version",type:"uint256"},{internalType:"bool",name:"latest",type:"bool"}],name:"updateAgent",outputs:[],stateMutability:"nonpayable",type:"function"}],M=new _.a.providers.JsonRpcProvider(b),P=function(){function e(t){Object(A.a)(this,e),this.contract=void 0,this.contract=new _.a.Contract(t,w,M)}return Object(I.a)(e,[{key:"getAgentsLength",value:function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.agentLength(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAgentAt",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.agentAt(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPoolIds",value:function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.queryFilter(this.contract.filters.PoolAdded(),51e5);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.args.poolId})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),C={environment:u[0],suggestedPools:[],suggestedPoolsLoading:!1,pool:{loading:!1,error:null,id:null,name:null},agents:[]},R=Object(O.b)("app/loadPoolIds",function(){var e=Object(h.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new P(t),e.next=3,n.getPoolIds();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(O.b)("app/loadAgent",function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a,s,r,i,o,p,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.poolId,s=t.index,r=n.getState(),i=new P(r.app.environment.contractAddress),e.next=5,i.getAgentAt(a,s);case 5:return o=e.sent,e.next=8,fetch("".concat(c,"/").concat(o[3])).then((function(e){if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()}));case 8:return p=e.sent,d=p.manifest,e.abrupt("return",{id:o[0],name:d.agentId,reference:o[3],from:d.from,version:d.version,date:d.timestamp,poolId:a,index:s});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=Object(O.b)("app/loadPool",function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a,s,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{poolId:null,agentsLength:0});case 2:return a=n.getState(),s=new P(a.app.environment.contractAddress),e.next=6,s.getAgentsLength(t);case 6:for(r=e.sent.toNumber(),i=0;i<r;i++)n.dispatch(k({poolId:t,index:i}));return e.abrupt("return",{poolId:t,agentsLength:r});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(O.c)({name:"app",initialState:C,reducers:{setEnvironment:function(e,t){e.environment=t.payload,e.pool={loading:!1,error:null,id:null,name:null},e.agents=[]}},extraReducers:function(e){e.addCase(E.pending,(function(e){e.pool.loading=!0,e.pool.error=null})).addCase(E.rejected,(function(e,t){e.pool.loading=!1,e.pool.error="Pool not found"})).addCase(E.fulfilled,(function(e,t){e.pool.loading=!1,e.pool.id=t.payload.poolId,e.pool.error=null,e.agents=Object(T.a)(Array(t.payload.agentsLength)).map((function(e,t){return{loading:!0,id:"",name:"",reference:"",version:"",fromAddress:"",date:""}}))})).addCase(k.fulfilled,(function(e,t){var n=t.payload;e.agents[n.index]={loading:!1,id:n.id,name:n.name,reference:n.reference,version:n.version,fromAddress:n.from,date:n.date}})).addCase(R.pending,(function(e){e.suggestedPoolsLoading=!0,e.suggestedPools=[]})).addCase(R.fulfilled,(function(e,t){var n=t.payload;e.suggestedPoolsLoading=!1,e.suggestedPools=n}))}}),N=L.actions.setEnvironment,S=L.reducer,F=(n(172),n(9));function H(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],r=j((function(e){return e.app.environment})),i=g(),c=function(e){return"Production"===e.name?"red":"purple"},b=Object(F.jsxs)(p.a,{as:"div",labelPosition:"right",children:[Object(F.jsxs)(p.a,{color:c(r),children:[Object(F.jsx)(d.a,{name:"fork"}),r.name]}),Object(F.jsx)(y.a,{as:"a",basic:!0,color:c(r),pointing:"left",children:"".concat(r.contractAddress.slice(0,6),"...").concat(r.contractAddress.slice(-4))})]});return Object(F.jsxs)(l.a,{className:"EnvironmentModal",onClose:function(){return s(!1)},onOpen:function(){return s(!0)},open:n,trigger:b,children:[Object(F.jsx)(l.a.Header,{children:"Select an environment in Goerli"}),Object(F.jsx)(l.a.Content,{children:u.map((function(e){return Object(F.jsxs)("div",{className:"EnvironmentModal__item",children:[Object(F.jsxs)(p.a,{as:"div",labelPosition:"right",onClick:function(){s(!1),i(N(e))},children:[Object(F.jsxs)(p.a,{color:c(e),children:[Object(F.jsx)(d.a,{name:"fork"}),e.name]}),Object(F.jsx)(y.a,{as:"div",basic:!0,color:c(e),pointing:"left",children:e.contractAddress})]}),Object(F.jsx)(p.a,{icon:"file",as:"a",href:"".concat(m,"/address/").concat(e.contractAddress),target:"_blank"})]},"env-btn-".concat(e.name))}))})]})}var D=function(){return Object(F.jsxs)("header",{className:"Topbar",children:[Object(F.jsx)("div",{className:"Topbar__title",children:"Pool explorer"}),Object(F.jsx)("div",{className:"Topbar__button-container",children:Object(F.jsx)(H,{})})]})},B=n(193),U=n(194);n(176);var z=function(){var e=g(),t=Object(a.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(!1),d=Object(o.a)(i,2),y=d[0],l=d[1],u=j((function(e){return e.app.suggestedPools})),c=j((function(e){return e.app.suggestedPoolsLoading})),b=j((function(e){return e.app.environment.contractAddress}));Object(a.useEffect)((function(){e(R(b)),r("")}),[e,b]);var m=c?[{value:Object(F.jsxs)("div",{children:["Loading pools... ",Object(F.jsx)(B.a,{active:!0,inline:!0})]})}]:u.filter((function(e){return e.startsWith(s)})).map((function(e){return{value:e}})),f=function(t){e(E(t)),r(t),l(!1)};return Object(F.jsxs)("div",{className:"PoolSearcher","data-loading":c,children:[Object(F.jsx)(U.a,{className:"PoolSearcher__input",size:"huge",fluid:!0,loading:c,placeholder:"Enter pool id...",onSearchChange:function(e,t){var n=t.value;return r(n)},onResultSelect:function(e,t){return f(t.result.value)},onBlur:function(){return l(!1)},onFocus:function(){return l(!0)},open:y,resultRenderer:function(e){var t=e.value;return Object(F.jsx)("div",{children:t},t)},results:m,value:s}),Object(F.jsx)(p.a,{className:"PoolSearcher__button",content:"Search",size:"small",onClick:function(){return f(s)}})]})},J=n(140),G=n(196),V=n(197),q=n(200);n(177);function W(e){var t=e.loading,n=e.id,a=e.name,s=e.reference,r=e.version,i=e.fromAddress,o=e.date;return t?Object(F.jsx)(G.a.Row,{children:Object(F.jsx)(G.a.Cell,{colSpan:"4",children:Object(F.jsx)(B.a,{active:!0,inline:!0})})}):Object(F.jsxs)(G.a.Row,{className:"Agent",children:[Object(F.jsxs)(G.a.Cell,{className:"Agent__name",children:[a,Object(F.jsx)("span",{children:" "}),Object(F.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://ipfs.infura.io/ipfs/".concat(s),children:["(",n,")"]})]}),Object(F.jsx)(G.a.Cell,{children:Object(F.jsx)(y.a,{color:"violet",children:r})}),Object(F.jsx)(G.a.Cell,{children:Object(F.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://goerli.etherscan.io/address/".concat(i),children:i})}),Object(F.jsx)(G.a.Cell,{children:o})]})}var K=function(){var e=j((function(e){return e.app.pool.id})),t=j((function(e){return e.app.pool.loading})),n=j((function(e){return e.app.pool.error})),a=j((function(e){return e.app.agents}));return n?Object(F.jsx)("div",{className:"Agents__container",children:Object(F.jsx)(V.a,{negative:!0,children:n})}):t?Object(F.jsx)("div",{className:"Agents__container",children:Object(F.jsx)(B.a,{active:!0,inline:!0})}):e?Object(F.jsxs)("div",{className:"Agents__container",children:[Object(F.jsxs)(q.a,{as:"h2",children:["Agents for",Object(F.jsx)("span",{className:"Agents__poolId",children:e})]}),Object(F.jsxs)(G.a,{striped:!0,children:[Object(F.jsxs)(G.a.Header,{children:[Object(F.jsx)(G.a.HeaderCell,{children:"AgentId"}),Object(F.jsx)(G.a.HeaderCell,{children:"Version"}),Object(F.jsx)(G.a.HeaderCell,{children:"From"}),Object(F.jsx)(G.a.HeaderCell,{children:"Date"})]}),Object(F.jsx)(G.a.Body,{children:a.map((function(e,t){return Object(F.jsx)(W,Object(J.a)({},e),"".concat(t,"-").concat(e.id))}))})]})]}):null};n(178);var Q=function(){return Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(D,{}),Object(F.jsx)(z,{}),Object(F.jsx)(K,{})]})},X=Object(O.a)({reducer:{app:S}});i.a.render(Object(F.jsx)(s.a.StrictMode,{children:Object(F.jsx)(f.a,{store:X,children:Object(F.jsx)(Q,{})})}),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.246ad6e3.chunk.js.map