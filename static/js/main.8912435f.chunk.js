(this["webpackJsonppool-explorer"]=this["webpackJsonppool-explorer"]||[]).push([[0],{156:function(e,t,n){},162:function(e,t){},172:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(37),i=n.n(s),o=(n(155),n(156),n(86)),d=n(198),p=n(75),l=n(107),c=n(195),u=[{name:"Production",contractAddress:"0x30dB6Af76Ff4A9A30d7f927eFab235a7ea600e22"},{name:"Development",contractAddress:"0xBD7F842Cb96dFF147d6b9b4c9f8e56acF76A969B"}],y="https://ipfs.infura.io/ipfs",b="https://goerli.infura.io/v3/a4ba4d26c1a145999d11d2630ac5eb3c",m="https://goerli.etherscan.io",f=n(85),j=function(){return Object(f.b)()},g=f.c,x=n(87),v=n(3),h=n.n(v),T=n(48),O=n(58),A=n(4),I=n(6),_=n(122),w=[{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"string",name:"ref",type:"string"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdminAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdminRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"string",name:"ref",type:"string"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"PoolAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"PoolAdminAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"PoolAdminRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"}],name:"PoolOwnershipTransfered",type:"event"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"string",name:"_ref",type:"string"}],name:"addAgent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"address",name:"_admin",type:"address"}],name:"addAgentAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"addPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"admin",type:"address"}],name:"addPoolAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"agentAdminAt",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentAdminLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"agentAt",outputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"agentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentRef",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract MinimalForwarderUpgradeable",name:"forwarder",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"poolAdminAt",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"poolAdminLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolExistsMap",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolOwners",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolVersion",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"removeAgent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"address",name:"_admin",type:"address"}],name:"removeAgentAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"admin",type:"address"}],name:"removePoolAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"_to",type:"address"}],name:"transferPoolOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"string",name:"_ref",type:"string"}],name:"updateAgent",outputs:[],stateMutability:"nonpayable",type:"function"}],P=new _.a.providers.JsonRpcProvider(b),M=function(){function e(t){Object(A.a)(this,e),this.contract=void 0,this.contract=new _.a.Contract(t,w,P)}return Object(I.a)(e,[{key:"getAgentsLength",value:function(){var e=Object(T.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.agentLength(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAgentAt",value:function(){var e=Object(T.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.agentAt(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPoolIds",value:function(){var e=Object(T.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.queryFilter(this.contract.filters.PoolAdded(),51e5);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.args.poolId})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),C={environment:u[0],suggestedPools:[],suggestedPoolsLoading:!1,pool:{loading:!1,error:null,id:null,name:null},agents:[]},k=Object(O.b)("app/loadPoolIds",function(){var e=Object(T.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new M(t),e.next=3,n.getPoolIds();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(O.b)("app/loadAgent",function(){var e=Object(T.a)(h.a.mark((function e(t,n){var a,r,s,i,o,d,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.poolId,r=t.index,s=n.getState(),i=new M(s.app.environment.contractAddress),e.next=5,i.getAgentAt(a,r);case 5:return o=e.sent,e.next=8,fetch("".concat(y,"/").concat(o[1])).then((function(e){if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()}));case 8:return d=e.sent,p=d.manifest,e.abrupt("return",{id:o[0],name:p.agentId,reference:o[1],from:p.from,version:p.version,date:p.timestamp,poolId:a,index:r});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(O.b)("app/loadPool",function(){var e=Object(T.a)(h.a.mark((function e(t,n){var a,r,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{poolId:null,agentsLength:0});case 2:return a=n.getState(),r=new M(a.app.environment.contractAddress),e.next=6,r.getAgentsLength(t);case 6:for(s=e.sent.toNumber(),i=0;i<s;i++)n.dispatch(N({poolId:t,index:i}));return e.abrupt("return",{poolId:t,agentsLength:s});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(O.c)({name:"app",initialState:C,reducers:{setEnvironment:function(e,t){e.environment=t.payload,e.pool={loading:!1,error:null,id:null,name:null},e.agents=[]}},extraReducers:function(e){e.addCase(S.pending,(function(e){e.pool.loading=!0,e.pool.error=null})).addCase(S.rejected,(function(e,t){e.pool.loading=!1,e.pool.error="Pool not found"})).addCase(S.fulfilled,(function(e,t){e.pool.loading=!1,e.pool.id=t.payload.poolId,e.pool.error=null,e.agents=Object(x.a)(Array(t.payload.agentsLength)).map((function(e,t){return{loading:!0,id:"",name:"",reference:"",version:"",fromAddress:"",date:""}}))})).addCase(N.fulfilled,(function(e,t){var n=t.payload;e.agents[n.index]={loading:!1,id:n.id,name:n.name,reference:n.reference,version:n.version,fromAddress:n.from,date:n.date}})).addCase(k.pending,(function(e){e.suggestedPoolsLoading=!0,e.suggestedPools=[]})).addCase(k.fulfilled,(function(e,t){var n=t.payload;e.suggestedPoolsLoading=!1,e.suggestedPools=n}))}}),F=L.actions.setEnvironment,E=L.reducer,R=(n(172),n(9));function H(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],s=g((function(e){return e.app.environment})),i=j(),y=function(e){return"Production"===e.name?"red":"purple"},b=Object(R.jsxs)(d.a,{as:"div",labelPosition:"right",children:[Object(R.jsxs)(d.a,{color:y(s),children:[Object(R.jsx)(p.a,{name:"fork"}),s.name]}),Object(R.jsx)(l.a,{as:"a",basic:!0,color:y(s),pointing:"left",children:"".concat(s.contractAddress.slice(0,6),"...").concat(s.contractAddress.slice(-4))})]});return Object(R.jsxs)(c.a,{className:"EnvironmentModal",onClose:function(){return r(!1)},onOpen:function(){return r(!0)},open:n,trigger:b,children:[Object(R.jsx)(c.a.Header,{children:"Select an environment in Goerli"}),Object(R.jsx)(c.a.Content,{children:u.map((function(e){return Object(R.jsxs)("div",{className:"EnvironmentModal__item",children:[Object(R.jsxs)(d.a,{as:"div",labelPosition:"right",onClick:function(){r(!1),i(F(e))},children:[Object(R.jsxs)(d.a,{color:y(e),children:[Object(R.jsx)(p.a,{name:"fork"}),e.name]}),Object(R.jsx)(l.a,{as:"div",basic:!0,color:y(e),pointing:"left",children:e.contractAddress})]}),Object(R.jsx)(d.a,{icon:"file",as:"a",href:"".concat(m,"/address/").concat(e.contractAddress),target:"_blank"})]},"env-btn-".concat(e.name))}))})]})}var B=function(){return Object(R.jsxs)("header",{className:"Topbar",children:[Object(R.jsx)("div",{className:"Topbar__title",children:"Pool explorer"}),Object(R.jsx)("div",{className:"Topbar__button-container",children:Object(R.jsx)(H,{})})]})},z=n(193),D=n(194);n(176);var J=function(){var e=j(),t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!1),p=Object(o.a)(i,2),l=p[0],c=p[1],u=g((function(e){return e.app.suggestedPools})),y=g((function(e){return e.app.suggestedPoolsLoading})),b=g((function(e){return e.app.environment.contractAddress}));Object(a.useEffect)((function(){e(k(b)),s("")}),[e,b]);var m=y?[{value:Object(R.jsxs)("div",{children:["Loading pools... ",Object(R.jsx)(z.a,{active:!0,inline:!0})]})}]:u.filter((function(e){return e.startsWith(r)})).map((function(e){return{value:e}})),f=function(t){e(S(t)),s(t),c(!1)};return Object(R.jsxs)("div",{className:"PoolSearcher","data-loading":y,children:[Object(R.jsx)(D.a,{className:"PoolSearcher__input",size:"huge",fluid:!0,loading:y,placeholder:"Enter pool id...",onSearchChange:function(e,t){var n=t.value;return s(n)},onResultSelect:function(e,t){return f(t.result.value)},onBlur:function(){return c(!1)},onFocus:function(){return c(!0)},open:l,resultRenderer:function(e){var t=e.value;return Object(R.jsx)("div",{children:t},t)},results:m,value:r}),Object(R.jsx)(d.a,{className:"PoolSearcher__button",content:"Search",size:"small",onClick:function(){return f(r)}})]})},U=n(140),V=n(196),q=n(197),G=n(200);n(177);function W(e){var t=e.loading,n=e.id,a=e.name,r=e.reference,s=e.version,i=e.fromAddress,o=e.date;return t?Object(R.jsx)(V.a.Row,{children:Object(R.jsx)(V.a.Cell,{colSpan:"4",children:Object(R.jsx)(z.a,{active:!0,inline:!0})})}):Object(R.jsxs)(V.a.Row,{className:"Agent",children:[Object(R.jsxs)(V.a.Cell,{className:"Agent__name",children:[a,Object(R.jsx)("span",{children:" "}),Object(R.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://ipfs.infura.io/ipfs/".concat(r),children:["(",n,")"]})]}),Object(R.jsx)(V.a.Cell,{children:Object(R.jsx)(l.a,{color:"violet",children:s})}),Object(R.jsx)(V.a.Cell,{children:Object(R.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://goerli.etherscan.io/address/".concat(i),children:i})}),Object(R.jsx)(V.a.Cell,{children:o})]})}var K=function(){var e=g((function(e){return e.app.pool.id})),t=g((function(e){return e.app.pool.loading})),n=g((function(e){return e.app.pool.error})),a=g((function(e){return e.app.agents}));return n?Object(R.jsx)("div",{className:"Agents__container",children:Object(R.jsx)(q.a,{negative:!0,children:n})}):t?Object(R.jsx)("div",{className:"Agents__container",children:Object(R.jsx)(z.a,{active:!0,inline:!0})}):e?Object(R.jsxs)("div",{className:"Agents__container",children:[Object(R.jsxs)(G.a,{as:"h2",children:["Agents for",Object(R.jsx)("span",{className:"Agents__poolId",children:e})]}),Object(R.jsxs)(V.a,{striped:!0,children:[Object(R.jsxs)(V.a.Header,{children:[Object(R.jsx)(V.a.HeaderCell,{children:"AgentId"}),Object(R.jsx)(V.a.HeaderCell,{children:"Version"}),Object(R.jsx)(V.a.HeaderCell,{children:"From"}),Object(R.jsx)(V.a.HeaderCell,{children:"Date"})]}),Object(R.jsx)(V.a.Body,{children:a.map((function(e,t){return Object(R.jsx)(W,Object(U.a)({},e),"".concat(t,"-").concat(e.id))}))})]})]}):null};n(178);var Q=function(){return Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)(B,{}),Object(R.jsx)(J,{}),Object(R.jsx)(K,{})]})},X=Object(O.a)({reducer:{app:E}});i.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(f.a,{store:X,children:Object(R.jsx)(Q,{})})}),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.8912435f.chunk.js.map