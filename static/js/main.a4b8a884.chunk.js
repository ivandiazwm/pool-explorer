(this["webpackJsonppool-explorer"]=this["webpackJsonppool-explorer"]||[]).push([[0],{147:function(e,t,n){},153:function(e,t){},163:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(35),i=n.n(r),o=(n(146),n(147),n(75)),d=n(171),p=n(53),l=n(78),c=n(186),y=n(184),u=[{name:"Production",contractAddress:"0x30dB6Af76Ff4A9A30d7f927eFab235a7ea600e22"},{name:"Development",contractAddress:"0xBD7F842Cb96dFF147d6b9b4c9f8e56acF76A969B"}],b="https://ipfs.infura.io/ipfs",m="https://goerli.infura.io/v3/a4ba4d26c1a145999d11d2630ac5eb3c",f="https://goerli.etherscan.io",j=n(74),x=function(){return Object(j.b)()},g=j.c,h=n(76),v=n(3),T=n.n(v),O=n(63),A=n(65),_=n(4),I=n(5),w=n(113),M=[{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"string",name:"ref",type:"string"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdminAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentAdminRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"agentId",type:"bytes32"},{indexed:!1,internalType:"string",name:"ref",type:"string"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"AgentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"by",type:"address"}],name:"PoolAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"PoolAdminAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"PoolAdminRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"poolId",type:"bytes32"},{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"}],name:"PoolOwnershipTransfered",type:"event"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"string",name:"_ref",type:"string"}],name:"addAgent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"address",name:"_admin",type:"address"}],name:"addAgentAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"addPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"admin",type:"address"}],name:"addPoolAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"agentAdminAt",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentAdminLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"agentAt",outputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"agentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"agentRef",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract MinimalForwarderUpgradeable",name:"forwarder",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"poolAdminAt",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"}],name:"poolAdminLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolExistsMap",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolOwners",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"poolVersion",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"}],name:"removeAgent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"address",name:"_admin",type:"address"}],name:"removeAgentAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"admin",type:"address"}],name:"removePoolAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"address",name:"_to",type:"address"}],name:"transferPoolOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_poolId",type:"bytes32"},{internalType:"bytes32",name:"_agentId",type:"bytes32"},{internalType:"string",name:"_ref",type:"string"}],name:"updateAgent",outputs:[],stateMutability:"nonpayable",type:"function"}],C=new w.a.providers.JsonRpcProvider(m),P=function(){function e(t){Object(_.a)(this,e),this.contract=void 0,this.contract=new w.a.Contract(t,M,C)}return Object(I.a)(e,[{key:"getAgentsLength",value:function(){var e=Object(O.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.agentLength(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAgentAt",value:function(){var e=Object(O.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.agentAt(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),k={environment:u[0],pool:{loading:!1,error:null,id:null,name:null},agents:[]},N=Object(A.b)("app/loadAgent",function(){var e=Object(O.a)(T.a.mark((function e(t,n){var a,s,r,i,o,d,p;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.poolId,s=t.index,r=n.getState(),i=new P(r.app.environment.contractAddress),e.next=5,i.getAgentAt(a,s);case 5:return o=e.sent,e.next=8,fetch("".concat(b,"/").concat(o[1])).then((function(e){if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()}));case 8:return d=e.sent,p=d.manifest,e.abrupt("return",{id:o[0],name:p.agentId,reference:o[1],from:p.from,version:p.version,date:p.timestamp,poolId:a,index:s});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(A.b)("app/loadPool",function(){var e=Object(O.a)(T.a.mark((function e(t,n){var a,s,r,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{poolId:null,agentsLength:0});case 2:return a=n.getState(),s=new P(a.app.environment.contractAddress),e.next=6,s.getAgentsLength(t);case 6:for(r=e.sent.toNumber(),i=0;i<r;i++)n.dispatch(N({poolId:t,index:i}));return e.abrupt("return",{poolId:t,agentsLength:r});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=Object(A.c)({name:"app",initialState:k,reducers:{setEnvironment:function(e,t){e.environment=t.payload,e.pool={loading:!1,error:null,id:null,name:null},e.agents=[]}},extraReducers:function(e){e.addCase(S.pending,(function(e){e.pool.loading=!0,e.pool.error=null})).addCase(S.rejected,(function(e,t){e.pool.loading=!1,e.pool.error="Pool not found"})).addCase(S.fulfilled,(function(e,t){e.pool.loading=!1,e.pool.id=t.payload.poolId,e.pool.error=null,e.agents=Object(h.a)(Array(t.payload.agentsLength)).map((function(e,t){return{loading:!0,id:"",name:"",reference:"",version:"",fromAddress:"",date:""}}))})).addCase(N.fulfilled,(function(e,t){var n=t.payload;e.agents[n.index]={loading:!1,id:n.id,name:n.name,reference:n.reference,version:n.version,fromAddress:n.from,date:n.date}}))}}),F=E.actions.setEnvironment,L=E.reducer,R=(n(163),n(9));function H(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),i=Object(o.a)(r,2),b=i[0],m=i[1],j=g((function(e){return e.app.environment})),h=x(),v=function(e){return"Production"===e.name?"red":"purple"},T=Object(R.jsxs)(d.a,{as:"div",labelPosition:"right",children:[Object(R.jsxs)(d.a,{color:v(j),children:[Object(R.jsx)(p.a,{name:"fork"}),j.name]}),Object(R.jsx)(l.a,{as:"a",basic:!0,color:v(j),pointing:"left",children:"".concat(j.contractAddress.slice(0,6),"...").concat(j.contractAddress.slice(-4))})]});return Object(R.jsxs)(c.a,{className:"EnvironmentModal",onClose:function(){return s(!1)},onOpen:function(){s(!0),m("")},open:n,trigger:T,children:[Object(R.jsx)(c.a.Header,{children:"Select an environment in Goerli"}),Object(R.jsxs)(c.a.Content,{children:[u.map((function(e){return Object(R.jsxs)("div",{className:"EnvironmentModal__item",children:[Object(R.jsxs)(d.a,{as:"div",labelPosition:"right",onClick:function(){s(!1),h(F(e))},children:[Object(R.jsxs)(d.a,{color:v(e),children:[Object(R.jsx)(p.a,{name:"fork"}),e.name]}),Object(R.jsx)(l.a,{as:"div",basic:!0,color:v(e),pointing:"left",children:e.contractAddress})]}),Object(R.jsx)(d.a,{icon:"file",as:"a",href:"".concat(f,"/address/").concat(e.contractAddress),target:"_blank"})]},"env-btn-".concat(e.name))})),Object(R.jsx)("div",{className:"EnvironmentModal__item",children:Object(R.jsx)(y.a,{className:"EnvironmentModal__input",onChange:function(e){return m(e.target.value)},label:Object(R.jsxs)(d.a,{color:"blue",onClick:function(){s(!1),h(F({name:"Custom",contractAddress:b}))},children:[Object(R.jsx)(p.a,{name:"fork"}),"Set custom contract"]}),labelPosition:"right"})})]})]})}var B=function(){return Object(R.jsxs)("header",{className:"Topbar",children:[Object(R.jsx)("div",{className:"Topbar__title",children:"Pool explorer"}),Object(R.jsx)("div",{className:"Topbar__button-container",children:Object(R.jsx)(H,{})})]})};n(167);var D=function(){var e=x(),t=Object(a.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1];return g((function(e){return e})),Object(R.jsxs)("div",{className:"PoolSearcher",children:[Object(R.jsx)(y.a,{className:"PoolSearcher__input",action:{color:"teal",icon:"search",labelPosition:"right",content:"Search",onClick:function(){return e(S(s))}},size:"huge",list:"pools",placeholder:"Enter pool id...",onChange:function(e){return r(e.target.value)},value:s}),Object(R.jsx)("datalist",{id:"pools",children:Object(R.jsx)("option",{value:"0x9d3d1df113ae5f4ff7fb542439229d50a384f4c2162c4fe4e298beefc872ddf2",children:"0x9d3d1df113ae5f4ff7fb542439229d50a384f4c2162c4fe4e298beefc872ddf2"})})]})},J=n(131),z=n(187),U=n(185),V=n(188),G=n(190);n(168);function q(e){var t=e.loading,n=e.id,a=e.name,s=e.reference,r=e.version,i=e.fromAddress,o=e.date;return t?Object(R.jsx)(z.a.Row,{children:Object(R.jsx)(z.a.Cell,{colSpan:"4",children:Object(R.jsx)(U.a,{active:!0,inline:!0})})}):Object(R.jsxs)(z.a.Row,{className:"Agent",children:[Object(R.jsxs)(z.a.Cell,{className:"Agent__name",children:[a,Object(R.jsx)("span",{children:" "}),Object(R.jsxs)("a",{target:"_blank",href:"https://ipfs.infura.io/ipfs/".concat(s),children:["(",n,")"]})]}),Object(R.jsx)(z.a.Cell,{children:Object(R.jsx)(l.a,{color:"violet",children:r})}),Object(R.jsx)(z.a.Cell,{children:Object(R.jsx)("a",{target:"_blank",href:"https://goerli.etherscan.io/address/".concat(i),children:i})}),Object(R.jsx)(z.a.Cell,{children:o})]})}var K=function(){var e=g((function(e){return e.app.pool.id})),t=g((function(e){return e.app.pool.loading})),n=g((function(e){return e.app.pool.error})),a=g((function(e){return e.app.agents}));return n?Object(R.jsx)("div",{className:"Agents__container",children:Object(R.jsx)(V.a,{negative:!0,children:n})}):t?Object(R.jsx)("div",{className:"Agents__container",children:Object(R.jsx)(U.a,{active:!0,inline:!0})}):e?Object(R.jsxs)("div",{className:"Agents__container",children:[Object(R.jsxs)(G.a,{as:"h2",children:["Agents for",Object(R.jsx)("span",{className:"Agents__poolId",children:e})]}),Object(R.jsxs)(z.a,{striped:!0,children:[Object(R.jsxs)(z.a.Header,{children:[Object(R.jsx)(z.a.HeaderCell,{children:"AgentId"}),Object(R.jsx)(z.a.HeaderCell,{children:"Version"}),Object(R.jsx)(z.a.HeaderCell,{children:"From"}),Object(R.jsx)(z.a.HeaderCell,{children:"Date"})]}),Object(R.jsx)(z.a.Body,{children:a.map((function(e,t){return Object(R.jsx)(q,Object(J.a)({},e),"".concat(t,"-").concat(e.id))}))})]})]}):null};n(169);var Q=function(){return Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)(B,{}),Object(R.jsx)(D,{}),Object(R.jsx)(K,{})]})},W=Object(A.a)({reducer:{app:L}});i.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(j.a,{store:W,children:Object(R.jsx)(Q,{})})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.a4b8a884.chunk.js.map